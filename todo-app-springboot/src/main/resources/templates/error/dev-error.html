<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é–‹ç™ºç’°å¢ƒã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #1e1e1e;
            color: #ffffff;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: #2d2d2d;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }
        .header {
            background-color: #dc3545;
            color: white;
            padding: 15px 20px;
            border-radius: 8px 8px 0 0;
            margin: -20px -20px 20px -20px;
        }
        .header h1 {
            margin: 0;
            font-size: 24px;
        }
        .error-info {
            background-color: #3d3d3d;
            border: 1px solid #555;
            border-radius: 4px;
            padding: 15px;
            margin: 10px 0;
        }
        .error-info h3 {
            margin-top: 0;
            color: #ffc107;
        }
        .stack-trace {
            background-color: #000;
            border: 1px solid #555;
            border-radius: 4px;
            padding: 15px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            line-height: 1.4;
            white-space: pre-wrap;
            margin: 10px 0;
        }
        .debug-section {
            background-color: #3d3d3d;
            border-left: 4px solid #17a2b8;
            padding: 15px;
            margin: 15px 0;
        }
        .debug-section h4 {
            margin-top: 0;
            color: #17a2b8;
        }
        .debug-list {
            list-style-type: none;
            padding: 0;
        }
        .debug-list li {
            background-color: #2d2d2d;
            padding: 8px 12px;
            margin: 4px 0;
            border-radius: 4px;
            border-left: 3px solid #6c757d;
        }
        .debug-actions {
            background-color: #495057;
            padding: 15px;
            border-radius: 4px;
            margin: 20px 0;
        }
        .debug-actions h4 {
            margin-top: 0;
            color: #28a745;
        }
        .action-link {
            display: inline-block;
            background-color: #007bff;
            color: white;
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 4px;
            margin: 4px 8px 4px 0;
            transition: background-color 0.3s;
        }
        .action-link:hover {
            background-color: #0056b3;
            text-decoration: none;
            color: white;
        }
        .warning {
            background-color: #856404;
            border: 1px solid #ffc107;
            color: #fff3cd;
            padding: 12px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .code {
            background-color: #000;
            color: #00ff00;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
        .timestamp {
            color: #6c757d;
            font-size: 0.9em;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸš¨ é–‹ç™ºç’°å¢ƒã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸</h1>
            <p>ã“ã®ãƒšãƒ¼ã‚¸ã¯é–‹ç™ºç’°å¢ƒã§ã®ã¿è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚è©³ç´°ãªãƒ‡ãƒãƒƒã‚°æƒ…å ±ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚</p>
        </div>

        <div class="error-info">
            <h3>ã‚¨ãƒ©ãƒ¼æ¦‚è¦</h3>
            <p><strong>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹:</strong> <span th:text="${status}">500</span></p>
            <p><strong>ã‚¨ãƒ©ãƒ¼ã‚¿ã‚¤ãƒ—:</strong> <span th:text="${error}">Internal Server Error</span></p>
            <p><strong>ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸:</strong> <span th:text="${message}">äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ</span></p>
            <p><strong>ãƒ‘ã‚¹:</strong> <code class="code" th:text="${path}">/api/todos</code></p>
            <p><strong>ç™ºç”Ÿæ—¥æ™‚:</strong> <span th:text="${timestamp}">2024-01-01 12:00:00</span></p>
        </div>

        <div class="debug-section" th:if="${exception}">
            <h4>ğŸ“‹ ä¾‹å¤–è©³ç´°</h4>
            <p><strong>ä¾‹å¤–ã‚¯ãƒ©ã‚¹:</strong> <code class="code" th:text="${exception.class.simpleName}">RuntimeException</code></p>
            <p><strong>ä¾‹å¤–ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸:</strong> <span th:text="${exception.message}">ä¾‹å¤–ãŒç™ºç”Ÿã—ã¾ã—ãŸ</span></p>
            
            <div class="stack-trace" th:if="${trace}">
                <strong>ã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹:</strong>
                <span th:text="${trace}">ã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹ãŒè¡¨ç¤ºã•ã‚Œã¾ã™</span>
            </div>
        </div>

        <div class="debug-section">
            <h4>ğŸ” ãƒ‡ãƒãƒƒã‚°ãƒ’ãƒ³ãƒˆ</h4>
            <ul class="debug-list">
                <li><strong>HTTP 400 (Bad Request):</strong> ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®å½¢å¼ã‚„å¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ç¢ºèªã—ã¦ãã ã•ã„</li>
                <li><strong>HTTP 404 (Not Found):</strong> URLãƒ‘ã‚¹ã‚„ãƒªã‚½ãƒ¼ã‚¹IDãŒæ­£ã—ã„ã‹ç¢ºèªã—ã¦ãã ã•ã„</li>
                <li><strong>HTTP 500 (Internal Server Error):</strong> ã‚µãƒ¼ãƒãƒ¼ãƒ­ã‚°ã‚’ç¢ºèªã—ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã‚„è¨­å®šã‚’ç‚¹æ¤œã—ã¦ãã ã•ã„</li>
                <li><strong>ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼:</strong> å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ãŒè¦ä»¶ã‚’æº€ãŸã—ã¦ã„ã‚‹ã‹ç¢ºèªã—ã¦ãã ã•ã„</li>
                <li><strong>ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼:</strong> H2ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®çŠ¶æ…‹ã‚’ç¢ºèªã—ã¦ãã ã•ã„</li>
            </ul>
        </div>

        <div class="debug-section">
            <h4>ğŸŒ ãƒªã‚¯ã‚¨ã‚¹ãƒˆæƒ…å ±</h4>
            <ul class="debug-list">
                <li><strong>ãƒ¡ã‚½ãƒƒãƒ‰:</strong> <span th:text="${method}">GET</span></li>
                <li><strong>URL:</strong> <code class="code" th:text="${url}">http://localhost:8080/api/todos</code></li>
                <li><strong>ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ:</strong> <span th:text="${userAgent}">Mozilla/5.0...</span></li>
                <li><strong>IPã‚¢ãƒ‰ãƒ¬ã‚¹:</strong> <span th:text="${clientIP}">127.0.0.1</span></li>
            </ul>
        </div>

        <div class="debug-actions">
            <h4>ğŸ› ï¸ ãƒ‡ãƒãƒƒã‚°ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</h4>
            <a href="/h2-console" class="action-link" target="_blank">H2ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚³ãƒ³ã‚½ãƒ¼ãƒ«</a>
            <a href="/dev/actuator/health" class="action-link" target="_blank">ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å¥å…¨æ€§ãƒã‚§ãƒƒã‚¯</a>
            <a href="/dev/monitor/jvm" class="action-link" target="_blank">JVMãƒ¡ãƒˆãƒªã‚¯ã‚¹</a>
            <a href="/dev/diagnostics/health-check" class="action-link" target="_blank">ã‚·ã‚¹ãƒ†ãƒ è¨ºæ–­</a>
            <a href="/dev/api-docs/overview" class="action-link" target="_blank">API ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a>
            <a href="/todos" class="action-link">Todoä¸€è¦§ã«æˆ»ã‚‹</a>
        </div>

        <div class="warning">
            <strong>âš ï¸ é‡è¦ãªæ³¨æ„äº‹é …:</strong>
            ã“ã®ã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸ã¯é–‹ç™ºç’°å¢ƒã§ã®ã¿è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚æœ¬ç•ªç’°å¢ƒã§ã¯ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®ãŸã‚è©³ç´°ãªã‚¨ãƒ©ãƒ¼æƒ…å ±ã¯è¡¨ç¤ºã•ã‚Œã¾ã›ã‚“ã€‚
            å®Ÿéš›ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯ã€ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèªã—ã¦ã‚¨ãƒ©ãƒ¼ã®è©³ç´°ã‚’èª¿æŸ»ã—ã¦ãã ã•ã„ã€‚
        </div>

        <div class="timestamp">
            ã“ã®ã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸ã¯é–‹ç™ºç’°å¢ƒæœ€é©åŒ–æ©Ÿèƒ½ (TASK-012) ã®ä¸€éƒ¨ã¨ã—ã¦ç”Ÿæˆã•ã‚Œã¾ã—ãŸã€‚
        </div>
    </div>
</body>
</html>